<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/main}">

<head>
    <title>Duty Status</title>
    <link rel="stylesheet" th:href="@{/css/duty-status.css}">
</head>

<body>
    <div layout:fragment="content">
        <div class="container-fluid">
            <div class="header-container">
                <h1>Duty Status</h1>
            </div>
            
            <!-- Summary Statistics -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value" th:text="${doctors != null ? doctors.size() : 0}">0</div>
                    <div class="stat-label">Total Doctors</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" th:text="${nurses != null ? nurses.size() : 0}">0</div>
                    <div class="stat-label">Total Nurses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" th:text="${doctorsOnDuty != null ? doctorsOnDuty : 0}">0</div>
                    <div class="stat-label">Doctors On Duty</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" th:text="${nursesOnDuty != null ? nursesOnDuty : 0}">0</div>
                    <div class="stat-label">Nurses On Duty</div>
                </div>
            </div>
            
            <!-- Doctor Duty Status Section -->
            <div class="queue-section">
                <div class="queue-title">
                    <span>Doctors Duty Status</span>
                </div>
                
                <!-- Search container -->
                <div class="search-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    <input type="text" id="doctor-search" placeholder="Search doctors..." />
                </div>
                
                <!-- Doctors table -->
                <table class="queue-table" id="doctors-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Specialization</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${doctors == null || doctors.empty}">
                            <td colspan="4" class="empty-state">No doctors found</td>
                        </tr>
                        <tr th:if="${doctors != null}" th:each="doctor : ${doctors}">
                            <td th:text="${doctor.firstName + ' ' + doctor.lastName}"></td>
                            <td th:text="${doctor.specialization}"></td>
                            <td>
                                <span th:if="${doctor.dutyStatus}" class="status-on">On Duty</span>
                                <span th:unless="${doctor.dutyStatus}" class="status-off">Off Duty</span>
                            </td>
                            <td>
                                <button class="status-btn toggle-duty-btn" th:data-staff-id="${doctor.id}">
                                    <span th:if="${doctor.dutyStatus}">Mark Off Duty</span>
                                    <span th:unless="${doctor.dutyStatus}">Mark On Duty</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Nurse Duty Status Section -->
            <div class="queue-section">
                <div class="queue-title">
                    <span>Nurses Duty Status</span>
                </div>
                
                <!-- Search container -->
                <div class="search-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    <input type="text" id="nurse-search" placeholder="Search nurses..." />
                </div>
                
                <!-- Nurses table -->
                <table class="queue-table" id="nurses-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Department</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${nurses == null || nurses.empty}">
                            <td colspan="4" class="empty-state">No nurses found</td>
                        </tr>
                        <tr th:if="${nurses != null}" th:each="nurse : ${nurses}">
                            <td th:text="${nurse.firstName + ' ' + nurse.lastName}"></td>
                            <td th:text="${nurse.department}"></td>
                            <td>
                                <span th:if="${nurse.dutyStatus}" class="status-on">On Duty</span>
                                <span th:unless="${nurse.dutyStatus}" class="status-off">Off Duty</span>
                            </td>
                            <td>
                                <button class="status-btn toggle-duty-btn" th:data-staff-id="${nurse.id}">
                                    <span th:if="${nurse.dutyStatus}">Mark Off Duty</span>
                                    <span th:unless="${nurse.dutyStatus}">Mark On Duty</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <th:block layout:fragment="scripts">
        <script th:src="@{/js/duty-status.js}"></script>
    </th:block>
</body>
</html> 