<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/main}">
<head>
    <title>Settings</title>
    <link rel="stylesheet" th:href="@{/css/settings.css}">
</head>
<body>
    <div layout:fragment="content">
        <div class="container-fluid">
            <h1>Settings</h1>
            
            <!-- Alert messages -->
            <div th:if="${success}" class="alert alert-success" th:text="${success}">
                Settings saved successfully
            </div>
            <div th:if="${error}" class="alert alert-danger" th:text="${error}">
                An error occurred
            </div>
            
            <div class="settings-container">
                <!-- Settings menu -->
                <div class="settings-menu">
                    <div id="generalMenuItem" class="settings-menu-item" data-target="generalPanel">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.0338 8.77803C13.1183 8.52921 13.1608 8.26768 13.1608 8.00089C13.1608 7.73409 13.1183 7.47256 13.0338 7.22374L14.2504 6.36671C14.3358 6.30337 14.3851 6.20705 14.3851 6.10517C14.3851 6.0033 14.3358 5.90697 14.2504 5.84363L12.8893 3.55839C12.8259 3.47316 12.7296 3.42389 12.6277 3.42389C12.5258 3.42389 12.4295 3.47316 12.3661 3.55839L11.09 4.31384C10.7258 4.02366 10.3166 3.78891 9.87945 3.62025L9.65633 2.22186C9.64382 2.16129 9.61055 2.10658 9.5622 2.06478C9.51385 2.02298 9.45332 1.9964 9.39056 1.99048H6.66889C6.54179 1.99048 6.42996 2.08105 6.41469 2.22186L6.19156 3.62025C5.75441 3.78891 5.34518 4.02366 4.98103 4.31384L3.70489 3.55839C3.56195 3.46743 3.38369 3.51114 3.29191 3.66743L1.93086 5.95276C1.84543 6.09847 1.87597 6.27097 2.01891 6.36193L3.27983 7.20865C3.19535 7.46775 3.15288 7.7393 3.15288 8.01148C3.15288 8.28367 3.19535 8.55521 3.27983 8.81431L2.01891 9.66104C1.87597 9.752 1.84543 9.9245 1.93086 10.0702L3.29191 12.3555C3.38369 12.5118 3.56195 12.5555 3.70489 12.4645L4.98103 11.7091C5.34518 11.9993 5.75441 12.234 6.19156 12.4027L6.41469 13.8011C6.42996 13.9419 6.54179 14.0325 6.66889 14.0325H9.39056C9.51766 14.0325 9.6295 13.9419 9.64476 13.8011L9.86789 12.4027C10.305 12.234 10.7143 11.9993 11.0784 11.7091L12.3546 12.4645C12.4975 12.5555 12.6757 12.5118 12.7675 12.3555L14.1286 10.0702C14.214 10.0068 14.2633 9.91049 14.2633 9.80861C14.2633 9.70674 14.214 9.61041 14.1286 9.54707L13.0338 8.77803Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        General Settings
                    </div>
                    <div class="settings-menu-item" data-target="accountPanel">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 8.00001C9.84095 8.00001 11.3333 6.50763 11.3333 4.66668C11.3333 2.82573 9.84095 1.33334 8 1.33334C6.15905 1.33334 4.66666 2.82573 4.66666 4.66668C4.66666 6.50763 6.15905 8.00001 8 8.00001Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.7267 14.6667C13.7267 12.0867 11.16 10 8.00001 10C4.84001 10 2.27334 12.0867 2.27334 14.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Account Settings
                    </div>
                    <div class="settings-menu-item" data-target="securityPanel">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.6667 7.33334V5.33334C12.6667 2.66668 11.3333 1.33334 8.66666 1.33334H7.33332C4.66666 1.33334 3.33333 2.66668 3.33333 5.33334V7.33334" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.00001 11.6667C9.10458 11.6667 10 10.7712 10 9.66668C10 8.56211 9.10458 7.66668 8.00001 7.66668C6.89544 7.66668 6.00001 8.56211 6.00001 9.66668C6.00001 10.7712 6.89544 11.6667 8.00001 11.6667Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M11.9933 14.6667H4.00667C1.94 14.6667 1.33334 14.0667 1.33334 12V11.3333C1.33334 9.26667 1.94 8.66667 4.00667 8.66667H11.9933C14.06 8.66667 14.6667 9.26667 14.6667 11.3333V12C14.6667 14.0667 14.06 14.6667 11.9933 14.6667Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Security
                    </div>
                    <div class="settings-menu-item" data-target="notificationPanel">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.00001 10.6667H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.00001 8H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.00001 5.33334H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4.00001 5.33334H4.00668" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4.00001 8H4.00668" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4.00001 10.6667H4.00668" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Notifications
                    </div>
                </div>
                
                <!-- Settings content panels -->
                <div class="settings-content">
                    <!-- General settings panel -->
                    <div id="generalPanel" class="settings-panel" style="display: none;">
                        <h2>General Settings</h2>
                        
                        <form class="settings-form" th:action="@{/settings/general}" method="post">
                            <h3>Appearance</h3>
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">Dark Mode</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="themeToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <h3>Language</h3>
                            <div class="form-group">
                                <label for="language" class="form-label">Preferred Language</label>
                                <select id="language" name="language" class="form-select">
                                    <option value="en" selected>English</option>
                                    <option value="fr">French</option>
                                    <option value="es">Spanish</option>
                                    <option value="de">German</option>
                                </select>
                            </div>
                            
                            <h3>Dashboard Preferences</h3>
                            <div class="form-group">
                                <label for="defaultPage" class="form-label">Default Start Page</label>
                                <select id="defaultPage" name="defaultPage" class="form-select">
                                    <option value="dashboard" selected>Dashboard</option>
                                    <option value="patients">Patients List</option>
                                    <option value="consultations">Consultations</option>
                                    <option value="drugs">Drugs</option>
                                </select>
                            </div>
                            
                            <div class="btn-container">
                                <button type="reset" class="btn btn-secondary">Reset</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Account settings panel -->
                    <div id="accountPanel" class="settings-panel" style="display: none;">
                        <h2>Account Settings</h2>
                        
                        <form class="settings-form" th:action="@{/settings/account}" method="post">
                            <div class="form-group">
                                <label for="fullName" class="form-label">Full Name</label>
                                <input type="text" id="fullName" name="fullName" class="form-control" th:value="${user?.fullName}" placeholder="Your name">
                            </div>
                            
                            <div class="form-group">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" id="email" name="email" class="form-control" th:value="${user?.email}" placeholder="you@example.com">
                            </div>
                            
                            <div class="form-group">
                                <label for="phoneNumber" class="form-label">Phone Number</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" th:value="${user?.phoneNumber}" placeholder="Your phone number">
                            </div>
                            
                            <div class="btn-container">
                                <button type="reset" class="btn btn-secondary">Reset</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Security panel -->
                    <div id="securityPanel" class="settings-panel" style="display: none;">
                        <h2>Security Settings</h2>
                        
                        <form class="settings-form" th:action="@{/settings/security/password}" method="post">
                            <h3>Change Password</h3>
                            <div class="form-group">
                                <label for="currentPassword" class="form-label">Current Password</label>
                                <input type="password" id="currentPassword" name="currentPassword" class="form-control" placeholder="Enter your current password">
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword" class="form-label">New Password</label>
                                <input type="password" id="newPassword" name="newPassword" class="form-control" placeholder="Enter new password">
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword" class="form-label">Confirm New Password</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" placeholder="Confirm new password">
                            </div>
                            
                            <div class="btn-container">
                                <button type="reset" class="btn btn-secondary">Reset</button>
                                <button type="submit" class="btn btn-primary">Update Password</button>
                            </div>
                        </form>
                        
                        <form class="settings-form" th:action="@{/settings/security/2fa}" method="post" style="margin-top: 30px;">
                            <h3>Two-Factor Authentication</h3>
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">Enable 2FA</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="twoFactorToggle" name="enable2fa" th:checked="${user?.twoFactorEnabled}">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="btn-container">
                                <button type="submit" class="btn btn-primary">Save Preferences</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Notification panel -->
                    <div id="notificationPanel" class="settings-panel" style="display: none;">
                        <h2>Notification Settings</h2>
                        
                        <form class="settings-form" th:action="@{/settings/notifications}" method="post">
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">Email Notifications</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="emailNotifications" name="emailNotifications" th:checked="${notifications?.emailEnabled}">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">System Notifications</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="systemNotifications" name="systemNotifications" th:checked="${notifications?.systemEnabled}">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <h3>Notification Types</h3>
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">New Patients</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="newPatientNotifications" name="newPatientNotifications" th:checked="${notifications?.newPatientEnabled}">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="toggle-container">
                                    <span class="toggle-label">New Consultations</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="newConsultationNotifications" name="newConsultationNotifications" th:checked="${notifications?.newConsultationEnabled}">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="btn-container">
                                <button type="reset" class="btn btn-secondary">Reset</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script layout:fragment="scripts" th:src="@{/js/settings.js}"></script>
</body>
</html> 