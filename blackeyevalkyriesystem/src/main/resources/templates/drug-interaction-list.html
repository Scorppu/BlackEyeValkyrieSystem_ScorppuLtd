<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/main}">
<head>
    <title>Drug Interactions</title>
    <style>
        .interactions-table {
            width: 100%;
            border-collapse: collapse;
        }
        .interactions-table th, .interactions-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .interactions-table th {
            background-color: rgba(138, 43, 226, 0.1);
            font-weight: 600;
        }
        .interactions-table tr:hover {
            background-color: var(--hover-bg);
        }
        .severity-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .severity-mild { background-color: #e6f4ea; color: #137333; }
        .severity-moderate { background-color: #fef7e0; color: #b06000; }
        .severity-severe { background-color: #fce8e6; color: #c5221f; }
        
        .severity-1 { background-color: #e6f4ea; color: #137333; }
        .severity-2 { background-color: #d9ead3; color: #0b5394; }
        .severity-3 { background-color: #fff2cc; color: #bf9000; }
        .severity-4 { background-color: #fce5cd; color: #cc0000; }
        .severity-5 { background-color: #f4cccc; color: #990000; }
    </style>
</head>
<body>
    <div layout:fragment="content">
        <div class="content-wrapper">
            <div class="content-header">
                <h1>Drug Interactions</h1>
                <div class="actions">
                    <a href="/drugs/interactions/add" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 4V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4 8H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Add Interaction
                    </a>
                </div>
            </div>
            
            <!-- Success message -->
            <div th:if="${success}" class="alert alert-success" style="margin-bottom: 20px;" th:text="${success}"></div>
            <!-- Error message -->
            <div th:if="${error}" class="alert alert-danger" style="margin-bottom: 20px;" th:text="${error}"></div>
            
            <!-- Interactions Table -->
            <div class="content-body">
                <div th:if="${interactions.isEmpty()}" class="empty-state">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 3.6V14.4C9 14.7314 9.26863 15 9.6 15H20.4C20.7314 15 21 14.7314 21 14.4V3.6C21 3.26863 20.7314 3 20.4 3H9.6C9.26863 3 9 3.26863 9 3.6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M6 7.5V18.3C6 18.6314 6.26863 18.9 6.6 18.9H17.4C17.7314 18.9 18 18.6314 18 18.3V18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 11.4V21.4C3 21.7314 3.26863 22 3.6 22H13.6C13.9314 22 14.2 21.7314 14.2 21.4V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <h3>No Interactions Found</h3>
                    <p>Start by adding interactions between drugs.</p>
                    <a href="/drugs/interactions/add" class="btn btn-primary">Add Interaction</a>
                </div>
                
                <div th:if="${!interactions.isEmpty()}" class="table-responsive">
                    <table class="interactions-table">
                        <thead>
                            <tr>
                                <th>Primary Drug</th>
                                <th>Interacting Drug</th>
                                <th>Severity</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="interaction, iterStat : ${interactions}">
                                <!-- Primary Drug -->
                                <td th:with="primaryDrug=${drugs.find(d -> d.id == interaction.sourceDrugId)}">
                                    <span th:text="${primaryDrug != null ? primaryDrug.name : 'Unknown Drug (' + interaction.sourceDrugId + ')'}">Primary Drug</span>
                                </td>
                                
                                <!-- Interacting Drug -->
                                <td th:with="interactingDrug=${drugs.find(d -> d.id == interaction.targetDrugId)}">
                                    <span th:text="${interactingDrug != null ? interactingDrug.name : 'Unknown Drug (' + interaction.targetDrugId + ')'}">Interacting Drug</span>
                                </td>
                                
                                <!-- Severity badge -->
                                <td>
                                    <span th:class="'severity-badge severity-' + ${interaction.severity}"
                                          th:text="${interaction.severity}">
                                        Severity
                                    </span>
                                </td>
                                
                                <!-- Description -->
                                <td th:text="${interaction.description}">Description</td>
                                
                                <!-- Actions -->
                                <td>
                                    <div class="btn-group">
                                        <a th:href="@{/drugs/interactions/delete(drugId=${interaction.sourceDrugId},interactingDrugId=${interaction.targetDrugId})}" 
                                           class="btn btn-sm btn-danger" 
                                           onclick="return confirm('Are you sure you want to delete this interaction?');">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M2 4H3.33333H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M5.33334 4V2.66667C5.33334 2.31305 5.47382 1.97391 5.72387 1.72386C5.97392 1.47381 6.31305 1.33334 6.66668 1.33334H9.33334C9.68697 1.33334 10.0261 1.47381 10.2762 1.72386C10.5262 1.97391 10.6667 2.31305 10.6667 2.66667V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M12.6667 4V13.3333C12.6667 13.687 12.5262 14.0261 12.2762 14.2761C12.0261 14.5262 11.687 14.6667 11.3333 14.6667H4.66668C4.31305 14.6667 3.97392 14.5262 3.72387 14.2761C3.47382 14.0261 3.33334 13.687 3.33334 13.3333V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            Delete
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 