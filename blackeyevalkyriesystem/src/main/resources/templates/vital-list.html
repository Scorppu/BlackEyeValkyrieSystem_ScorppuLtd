<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pending Vitals - BlackEyeValkyrieSystem</title>
    
    <th:block layout:fragment="head">
        <!-- Vital List specific CSS -->
        <link rel="stylesheet" th:href="@{/css/vital-list.css}">
    </th:block>
</head>
<body>
    <h1 layout:fragment="header-title">Pending Vitals</h1>
    
    <div layout:fragment="content">
        <div class="content-card">
            <div class="card-header">
                <h2>Patient Appointments Requiring Vital Signs</h2>
                <p>View and record vital signs for confirmed appointments</p>
            </div>
            
            <!-- Success message -->
            <div class="alert alert-success" th:if="${param.success}" th:text="${param.success == 'vitalSaved' ? 'Vital signs saved successfully!' : 'Operation completed successfully'}">
                Vital signs saved successfully!
            </div>
            
            <!-- Error message -->
            <div class="alert alert-error" th:if="${param.error}" th:text="${param.error == 'appointmentNotFound' ? 'Appointment not found!' : 'An error occurred'}">
                An error occurred!
            </div>
            
            <!-- Table of appointments -->
            <div th:if="${not #lists.isEmpty(appointments)}" class="table-responsive">
                <table class="vital-table">
                    <thead>
                        <tr>
                            <th>Patient Name</th>
                            <th>Date & Time</th>
                            <th>Age</th>
                            <th>Gender</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="appointment : ${appointments}">
                            <td>
                                <span class="patient-name" th:text="${appointment.patient.firstName + ' ' + appointment.patient.lastName}">John Doe</span>
                            </td>
                            <td th:text="${appointment.scheduledTime != null ? #temporals.format(appointment.scheduledTime, 'yyyy-MM-dd HH:mm') : 'Not Scheduled'}">2023-01-01 10:00</td>
                            <td th:text="${appointment.patient.age}">45</td>
                            <td th:text="${appointment.patient.sex ? 'Male' : 'Female'}">Male</td>
                            <td>
                                <span th:class="${'status-' + appointment.status}" 
                                      th:text="${appointment.status == 'confirmed' || appointment.status == 'pending' ? 'Vital Required' : 'Vital Checked'}">Pending</span>
                            </td>
                            <td>
                                <a class="btn-vital" th:href="@{'/vital/input/' + ${appointment.id}}" 
                                   th:text="${appointment.status == 'confirmed' || appointment.status == 'pending' ? 'Record Vitals' : 'View/Edit Vitals'}">Record Vitals</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Empty state -->
            <div class="empty-state" th:if="${#lists.isEmpty(appointments)}">
                <h3>No appointments requiring vital signs</h3>
                <p>There are currently no confirmed appointments requiring vital signs input.</p>
            </div>
        </div>
    </div>
    
    <th:block layout:fragment="scripts">
        <script th:src="@{/js/vital-list.js}"></script>
    </th:block>
</body>
</html> 
 